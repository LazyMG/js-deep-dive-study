# 22장. `this`

- `this`는 자신이 속한 객체 또는 자신이 생성할 인스턴스를 가리키는 자기 참조 변수다. `this`를 통해 자신이 속한 객체 또는 자신이 생성할 인스턴스의 프로퍼티나 메서드를 참조할 수 있다.
- `this`는 자바스크립트의 엔진에 의해 암묵적으로 생성되며(마치 함수의 `arguments` 객체와 같음), `this` 바인딩은 함수가 호출되는 방식에 의해 결정된다(그 중에서도 객체의 메서드 내부 또는 생성자 함수의 `this`만이 의미가 있다. 일반 함수의 `this`는 전역을 가리키고, 화살표 함수의 `this`는 상위 스코프의 `this`를 참조한다.)
- 메서드의 `this`는 메서드를 호출할 때 사용된 객체가 바인딩된다. 즉, 점 표기법 `.` 또는 괄호 표기법(`[]`)으로 메서드를 호출할 때 앞에 오는 객체가 `this`에 바인딩된다.
- 생성자 함수의 `this`는 미래에 생성될 인스턴스를 가리킨다. 생성자 함수를 정의할 당시에는 인스턴스가 존재하지 않으며, 가리킬 대상이 없기 때문에, 미래에 생길 인스턴스를 지칭할 것이라는 약속의 의미로 `this`를 사용할 수 있다.
- `call`, `apply`, `bind`를 사용하면 함수(또는 메서드)의 `this`를 명시적으로 지정할 수 있다. `call`과 `apply`는 함수를 호출하는 것을 목적으로 하는 메서드이기 때문에 `this`에 대한 정보와 함께 인수를 전달할 수 있다. 반면, `bind`는 `this` 정보를 전달하는 것만을 목적으로 한다.

# 23장. 실행 컨텍스트

- 자바스크립트 엔진은 소스 코드를 평가와 실행 두 가지 과정으로 나누어서 처리한다. 실행 컨텍스트는 평가 시점에 생성되어 변수-함수의 선언 관련 정보를 미리 파악하고 렉시컬 환경의 환경 레코드에 등록해둔다.
- 실행 컨텍스트는 식별자를 등록하고 관리하는 스코프(렉시컬 환경)와, 코드 실행 순서 관리를 구현한 내부 메커니즘(실행 컨텍스트 스택)으로, 모든 코드는 실행 컨텍스트를 통해 실행되고 관리된다.
- 실행 컨텍스트는 스택 형태로 관리되며, 후입선출 형태로 관리된다. 이후에 스택에 올려진 실행 컨텍스트가 먼저 해제돼야 그 직전의 실행 컨텍스트로 돌아간다. 실행 컨텍스트는 동시에 두 개 이상 함께 실행될 수 없다. 콜 스택의 최 상위에 위치한 실행 컨텍스트가 실행 중인 실행 컨텍스트가 된다.
- 실행 컨텍스트에는 렉시컬 환경이 있고, 렉시컬 환경은 환경 레코드(Environment Record)와 외부 렉시컬 환경에 대한 참조(OuterLexicalEnvironmentReference)로 구성된다. 환경 레코드는 스코프를, 외부 렉시컬 환경에 대한 참조는 스코프 체인을 구성한다.
- 스코프 체인 안에 같은 이름을 사용하는 변수나 함수가 중복될 경우 현재 실행 중인 실행 컨텍스트부터 순차적으로 탐색을 해 가장 가까운 위치에 있는 변수 또는 함수를 사용하게 된다.
